"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[692],{2692:function(e,s,o){o.r(s),o.d(s,{default:function(){return Ce}});var t=o(8683),r=o(5671),n=o(3144),i=o(136),a=o(5716),l=o(2791),c={},d=o(5861),u=o(885),p=o(7757),m=o.n(p),h="ProfileInfo_descriptionBlock__8sqKX",f={},x=o(184),j=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=(0,l.useState)(e.status),i=(0,u.Z)(n,2),a=i[0],c=i[1],d=(0,l.useState)(null),p=(0,u.Z)(d,2),m=p[0],h=p[1];return(0,l.useEffect)((function(){c(e.status)}),[e.status]),e.isOwner?(0,x.jsxs)("div",{children:[t?(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:f.status,autoFocus:!0,onBlur:function(){a.length<=300?(r(!1),e.updateStatusTC(a)):h("Value is too long")},onChange:function(e){c(e.currentTarget.value),null!==m&&h(null)},value:a})}):(0,x.jsxs)("div",{className:f.status,children:[(0,x.jsx)("b",{children:"My status: "}),(0,x.jsx)("abbr",{"data-title":"Double click for change",onDoubleClick:function(){r(!0)},children:a||(0,x.jsx)(x.Fragment,{children:" I don't have status"})})]}),m&&(0,x.jsx)("div",{style:{color:"red"},children:m})]}):(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"My status: "}),(0,x.jsx)("span",{children:a||"\u0417\u0434\u0435\u0441\u044c \u0431\u044b \u043c\u043e\u0433 \u0431\u044b\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 "+e.name})]})},v=o(5987),_=o(6139),g=o(9861),k=o(3079),b=["formMode"],N=function(e){var s=e.formMode,o=void 0!==s&&s,t=(0,v.Z)(e,b);return o?(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsxs)("b",{children:[t.contactKey,":"]})}),(0,x.jsx)("td",{children:(0,x.jsx)(_.Z,{component:g.II,name:t.contactKey,placeholder:t.contactKey,validate:[k.Ao]})})]}):(0,x.jsx)("div",{children:t.contactValue&&(0,x.jsxs)("div",{children:[(0,x.jsxs)("b",{children:[t.contactKey,":"]}),t.contactValue]})})},P=function(e){for(var s=Object.keys(e.profile.contacts),o=Object.values(e.profile.contacts),t=[],r=0;r<s.length;r++)t.push((0,x.jsx)(N,{contactKey:s[r],contactValue:o[r]}));return(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"contacts:"}),o.filter((function(e){return null!==e})).length?(0,x.jsx)("div",{children:t}):(0,x.jsx)(x.Fragment,{children:" I don't have contacts"})]})},w=function(e){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{children:"About"}),e.profile.lookingForAJobDescription&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"lookingForAJobDescription:"})," ",e.profile.lookingForAJobDescription]}),(0,x.jsx)(j,{status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,name:e.profile.fullName}),e.profile.aboutMe&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"AboutMe:"})," ",e.profile.aboutMe]})]}),(0,x.jsx)(P,{profile:e.profile})]})},y=o(704),C="UserInfoForm_formSummaryError__ujCwY",I="UserInfoForm_tableStyle__0zhO1",S=o(5984),F=(0,y.Z)({form:"userInfoForm"})((function(e){for(var s=Object.keys(e.profile.contacts),o=[],t=0;t<s.length;t++)o.push((0,x.jsx)(N,{contactKey:s[t],formMode:!0},t));return e.editMode?(0,x.jsx)("div",{children:(0,x.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,x.jsx)("div",{children:e.isOwner&&(0,x.jsxs)("table",{className:I,children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("b",{children:"Update photo"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{type:"file",onChange:e.onMainPhotoSelected})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("b",{children:"FullName:"})}),(0,x.jsx)("td",{children:(0,x.jsx)(_.Z,{component:g.II,name:"fullName",validate:[k.lp],placeholder:"fullName"})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("b",{children:"Looking for a job:"})}),(0,x.jsx)("td",{children:(0,x.jsx)(_.Z,{component:"input",name:"lookingForAJob",placeholder:"lookingForAJob",type:"checkbox"})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("b",{children:"Looking for a Description:"})}),(0,x.jsx)("td",{children:(0,x.jsx)(_.Z,{component:g.II,name:"lookingForAJobDescription",validate:[k.wk,k.lp],placeholder:"lookingForAJobDescription"})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("b",{children:"About me:"})}),(0,x.jsx)("td",{children:(0,x.jsx)(_.Z,{component:g.II,name:"aboutMe",validate:[k.wk],placeholder:"About me"})})]})]})}),e.error&&(0,x.jsxs)("div",{className:C,children:[" ",e.error]}),(0,x.jsx)("table",{className:I,children:o}),(0,x.jsx)(S.z,{name:"save",callBack:function(){},color:"green",size:"medium"})]})}):(0,x.jsx)("div",{children:(0,x.jsx)(w,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner})})})),T="HeaderProfile_wrapper__oedV7",M="HeaderProfile_imgBackgrounds__-Dmjp",Z="HeaderProfile_imgMain__4Sy9Q",O="PostsFollowersBlock_wrapper__NdZki",A="PostsFollowersBlock_item__klN9T",B="PostsFollowersBlock_number__PUm-E",L="PostsFollowersBlock_littleText__0ZY9S",U=function(e){return(0,x.jsxs)("div",{className:O,children:[(0,x.jsxs)("div",{className:A,children:[(0,x.jsx)("span",{className:B,children:e.posts})," ",(0,x.jsx)("span",{className:L,children:"Posts"})]}),(0,x.jsxs)("div",{className:A,children:[(0,x.jsx)("span",{className:B,children:e.followers})," ",(0,x.jsx)("span",{className:L,children:"Followers"})]}),(0,x.jsxs)("div",{className:A,children:[(0,x.jsx)("span",{className:B,children:e.follow})," ",(0,x.jsx)("span",{className:L,children:"Follow"})]})]})},J="UserName_wrapper__ql1Mm",D="UserName_fullName__J2R3Z",E="UserName_nickname__UlO87",q=function(e){var s=e.fullName,o=e.nickname;return(0,x.jsxs)("div",{className:J,children:[(0,x.jsx)("div",{className:D,children:(0,x.jsx)("h2",{children:s})}),(0,x.jsx)("div",{className:E,children:o})]})},z="ButtonsBarProfile_wrapper__4T7qe",K=function(e){return(0,x.jsx)("div",{className:z,children:(0,x.jsx)(S.z,{disabled:e.disabled,name:e.name,color:e.color,callBack:e.callBack,size:"large"})})},R=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=(0,l.useState)(!1),i=(0,u.Z)(n,2),a=i[0],c=i[1];if(e.profile){var p=function(){var e=(0,d.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return r(!0),e.next=4,setTimeout((function(){c(!a),r(!1)}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"headerProfile",children:(0,x.jsxs)("div",{className:T,children:[(0,x.jsx)("img",{className:M,src:e.randomBackground}),(0,x.jsx)("img",{className:Z,src:e.profile.photos.large?e.profile.photos.large:"".concat("/Samuray-way","/img/user5.png"),width:"200px"}),(0,x.jsx)(U,{posts:e.postsLeng,followers:"2.1k",follow:"32k"}),(0,x.jsx)(q,{fullName:e.profile.fullName,nickname:"@"+e.profile.fullName}),e.isOwner?(0,x.jsx)(K,{callBack:function(){return e.setEditMode(!e.editMode)},color:e.editMode?"red":"green",name:e.editMode?"cancel":"edit"}):(0,x.jsx)("div",{children:(0,x.jsx)(K,{disabled:t,color:a?"red":"green",callBack:p,name:a?"Unfollow":"Follow"})})]})})}return(0,x.jsx)(g.p9,{})},V=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=e.backgrounds[5];if(e.profile){var i=function(){var s=(0,d.Z)(m().mark((function s(o){var t;return m().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t={userId:e.myId.toString(),fullName:o.fullName,aboutMe:o.aboutMe,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.lookingForAJobDescription,contacts:{github:o.github,mainLink:o.mainLink,website:o.website,facebook:o.facebook,instagram:o.instagram,twitter:o.twitter,youtube:o.youtube,vk:o.vk}},s.next=3,e.updateProfileInfoTC(t);case 3:0===s.sent.data.resultCode&&r(!1);case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(R,{profile:e.profile,setEditMode:r,editMode:t,randomBackground:n,isOwner:e.isOwner,postsLeng:e.postsLeng}),(0,x.jsx)("div",{className:h,children:e.isOwner?(0,x.jsx)(F,{profile:e.profile,initialValues:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,onSubmit:i,setEditMode:r,editMode:t,onMainPhotoSelected:function(s){var o;null!==(o=s.target.files)&&void 0!==o&&o.length&&e.savePhoto(s.target.files[0])}}):(0,x.jsx)(w,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner})})]})}return(0,x.jsx)(g.p9,{})},H=o(2457),G=o(364),Q="MyPosts_postsBlock__I7u66",Y="MyPosts_posts__84rU-",$="MyPosts_header__tcCad",X="Post_item__Ury9y",W="Post_photoAndNameBlock__+Vs1n",ee="Post_NameAndTimeBlock__e1AQR",se="Post_userName__cJx4L",oe="Post_timeAgo__uZiHE",te="Post_postText__8qhbn",re="Post_userPhoto__LIeSo",ne="Post_likeImg__JPkq+",ie="Post_likedImh__vaSd1",ae="Post_postFooter__m2JAL",le="Post_likeImgAndCount__m4FrZ",ce="Post_likeCount__xq8j8",de="Post_commentCount__vLHxB",ue=function(e){return(0,x.jsxs)("div",{className:X,children:[(0,x.jsxs)("div",{className:W,children:[(0,x.jsx)("div",{children:(0,x.jsx)("img",{className:re,src:e.photo?e.photo:"".concat("/Samuray-way","/img/user5.png")})}),(0,x.jsxs)("div",{className:ee,children:[(0,x.jsx)("div",{className:se,children:e.userName}),(0,x.jsx)("div",{className:oe,children:e.post.timeAgo})]})]}),(0,x.jsx)("div",{className:te,children:e.post.postText}),(0,x.jsxs)("div",{className:ae,children:[(0,x.jsxs)("div",{className:le,children:[(0,x.jsx)("img",{className:"".concat(ne," ").concat(e.post.isLiked&&ie),src:"".concat("/Samuray-way","/img/icons/like2.png"),onClick:function(){return e.addOrRemoveLike(e.post.id)}}),(0,x.jsx)("span",{className:ce,children:e.post.like})]}),(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:de,children:"0 Comment"})})]})]})},pe={},me="InputForPost_formControl__Eb9b4",he="InputForPost_formControlError__Oi5M6",fe="InputForPost_spanFormControlError__fgz+l",xe="InputForPost_form__Jg12G",je=["input","meta"],ve=function(e){var s=e.input,o=e.meta,r=(0,v.Z)(e,je),n=o.touched&&o.error;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:xe,children:[(0,x.jsx)("input",(0,t.Z)((0,t.Z)((0,t.Z)({className:me+" "+(n?he:"")},r),s),o)),(0,x.jsx)(S.z,{name:"Add post",size:"large",callBack:function(){},color:"blue"})]}),(0,x.jsx)("div",{children:n&&(0,x.jsx)("div",{className:fe,children:o.error})})]})},_e=(0,y.Z)({form:"MyPostsAddMessageForm"})((function(e){return(0,x.jsx)("form",{onSubmit:e.handleSubmit,children:(0,x.jsx)("div",{className:pe.form,children:(0,x.jsx)(_.Z,{component:ve,name:"newPostBody",placeholder:"Enter your post",validate:[k.TD]})})})})),ge=l.memo((function(e){var s=e.posts.map((function(s){var o;return(0,x.jsx)(ue,{post:s,photo:null===(o=e.photo)||void 0===o?void 0:o.small,userName:e.userName,addOrRemoveLike:e.addOrRemoveLike},s.id)}));return(0,x.jsxs)("div",{className:Q,children:[(0,x.jsxs)("div",{className:$,children:[(0,x.jsx)("h3",{children:"My post"}),(0,x.jsx)("div",{children:(0,x.jsx)(_e,{onSubmit:function(s){s.newPostBody.trim()&&(e.addPost(s.newPostBody),s.newPostBody="")}})})]}),(0,x.jsx)("div",{className:Y,children:(0,x.jsx)("div",{children:s})})]})})),ke=(0,G.$j)((function(e){var s,o;return{posts:e.profilePage.posts,photo:null===(s=e.profilePage.profile)||void 0===s?void 0:s.photos,userName:null===(o=e.profilePage.profile)||void 0===o?void 0:o.fullName}}),{addPost:H.q2,addOrRemoveLike:H.LU})(ge),be=function(e){return(0,x.jsxs)("div",{className:c.content,children:[e.profile?(0,x.jsx)(V,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,savePhoto:e.savePhoto,myId:e.myId,updateProfileInfoTC:e.updateProfileInfoTC,backgrounds:e.backgrounds,postsLeng:e.postsLeng}):(0,x.jsx)(g.p9,{}),(0,x.jsx)(ke,{})]})},Ne=o(9271),Pe=o(7781),we=o(7897),ye=function(e){(0,i.Z)(o,e);var s=(0,a.Z)(o);function o(){return(0,r.Z)(this,o),s.apply(this,arguments)}return(0,n.Z)(o,[{key:"onUpdateComponent",value:function(){var e=this.props.match.params.userId;e||(e=this.props.myId.toString()),this.props.setUserProfileTC(e),this.props.setUserStatusTC(e)}},{key:"componentDidMount",value:function(){this.onUpdateComponent()}},{key:"componentDidUpdate",value:function(e,s){console.log("updateProps",e,s),e.match.params.userId!==this.props.match.params.userId&&this.onUpdateComponent()}},{key:"render",value:function(){return(0,x.jsx)(be,(0,t.Z)((0,t.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatusTC:this.props.updateStatusTC,isOwner:this.props.myId==this.props.id,savePhoto:this.props.savePhoto,myId:this.props.myId,updateProfileInfoTC:this.props.updateProfileInfoTC,backgrounds:this.props.backgrounds,postsLeng:this.props.postsLeng}))}}]),o}(l.Component),Ce=(0,Pe.qC)((0,G.$j)((function(e){var s;return{profile:e.profilePage.profile,status:e.profilePage.status,id:null===(s=e.profilePage.profile)||void 0===s?void 0:s.userId,myId:e.authMe.id,backgrounds:e.profilePage.backgrounds,postsLeng:e.profilePage.posts.length}}),{setUserStatusTC:H.hd,setUserProfileTC:H.bq,updateStatusTC:H.OG,savePhoto:H.Ju,updateProfileInfoTC:H.TR}),Ne.EN,we.e)(ye)}}]);
//# sourceMappingURL=692.f6002e60.chunk.js.map