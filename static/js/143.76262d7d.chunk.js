"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[143],{9143:function(e,s,o){o.r(s),o.d(s,{default:function(){return fe}});var t=o(8683),r=o(5671),n=o(3144),i=o(136),a=o(5716),l=o(2791),c={},d=o(5861),u=o(885),p=o(7757),f=o.n(p),h="ProfileInfo_descriptionBlock__8sqKX",m=o(184),x=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=(0,l.useState)(e.status),i=(0,u.Z)(n,2),a=i[0],c=i[1],d=(0,l.useState)(null),p=(0,u.Z)(d,2),f=p[0],h=p[1];return(0,l.useEffect)((function(){c(e.status)}),[e.status]),e.isOwner?(0,m.jsxs)("div",{children:[t?(0,m.jsx)("div",{children:(0,m.jsx)("input",{autoFocus:!0,onBlur:function(){a.length<=300?(r(!1),e.updateStatusTC(a)):h("Value is too long")},onChange:function(e){c(e.currentTarget.value),null!==f&&h(null)},value:a})}):(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My status: "}),(0,m.jsx)("span",{onDoubleClick:function(){r(!0)},children:a||(0,m.jsx)(m.Fragment,{children:" I don't have status"})})]}),f&&(0,m.jsx)("div",{style:{color:"red"},children:f})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My status: "}),(0,m.jsx)("span",{children:a||"\u0417\u0434\u0435\u0441\u044c \u0431\u044b \u043c\u043e\u0433 \u0431\u044b\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 "+e.name})]})},j=o(5987),v=o(6139),g=o(9837),b=o(3079),k=["formMode"],_=function(e){var s=e.formMode,o=void 0!==s&&s,t=(0,j.Z)(e,k);return o?(0,m.jsxs)("div",{children:[(0,m.jsxs)("b",{children:[t.contactKey,":"]}),(0,m.jsx)(v.Z,{component:g.II,name:t.contactKey,placeholder:t.contactKey,validate:[b.Ao]})]}):(0,m.jsx)("div",{children:t.contactValue&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("b",{children:[t.contactKey,":"]}),t.contactValue]})})},w=function(e){for(var s=Object.keys(e.profile.contacts),o=Object.values(e.profile.contacts),t=[],r=0;r<s.length;r++)t.push((0,m.jsx)(_,{contactKey:s[r],contactValue:o[r]}));return(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"contacts:"}),o.filter((function(e){return null!==e})).length?(0,m.jsx)("div",{children:t}):(0,m.jsx)(m.Fragment,{children:" I don't have contacts"})]})},P=function(e){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"About"}),e.profile.lookingForAJobDescription&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"lookingForAJobDescription:"})," ",e.profile.lookingForAJobDescription]}),(0,m.jsx)(x,{status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,name:e.profile.fullName}),e.profile.aboutMe&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"AboutMe:"})," ",e.profile.aboutMe]})]}),(0,m.jsx)(w,{profile:e.profile})]})},y=o(704),N=o(5032),C=o(5984),S=(0,y.Z)({form:"userInfoForm"})((function(e){for(var s=Object.keys(e.profile.contacts),o=[],t=0;t<s.length;t++)o.push((0,m.jsx)(_,{contactKey:s[t],formMode:!0},t));return e.editMode?(0,m.jsx)("div",{children:(0,m.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,m.jsxs)("div",{children:[e.isOwner&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Update photo"})," ",(0,m.jsx)("input",{type:"file",onChange:e.onMainPhotoSelected})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"FullName:"}),(0,m.jsx)(v.Z,{component:g.II,name:"fullName",validate:[b.lp],placeholder:"fullName"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job:"}),(0,m.jsx)(v.Z,{component:"input",name:"lookingForAJob",placeholder:"lookingForAJob",type:"checkbox"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a Description:"}),(0,m.jsx)(v.Z,{component:g.II,name:"lookingForAJobDescription",validate:[b.wk,b.lp],placeholder:"lookingForAJobDescription"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me:"}),(0,m.jsx)(v.Z,{component:g.II,name:"aboutMe",validate:[b.wk],placeholder:"About me"})]}),(0,m.jsx)(x,{status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,name:e.profile.fullName})]}),e.error&&(0,m.jsxs)("div",{className:N.Z.formSummaryError,children:[" ",e.error]}),(0,m.jsx)("div",{children:o}),(0,m.jsx)(C.z,{name:"save",callBack:function(){},color:"green",size:"medium"})]})}):(0,m.jsx)("div",{children:(0,m.jsx)(P,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner})})})),I="HeaderProfile_wrapper__oedV7",M="HeaderProfile_imgBackgrounds__-Dmjp",T="HeaderProfile_imgMain__4Sy9Q",F="PostsFollowersBlock_wrapper__NdZki",Z="PostsFollowersBlock_item__klN9T",O="PostsFollowersBlock_number__PUm-E",B="PostsFollowersBlock_littleText__0ZY9S",A=function(e){return(0,m.jsxs)("div",{className:F,children:[(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("span",{className:O,children:e.posts})," ",(0,m.jsx)("span",{className:B,children:"Posts"})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("span",{className:O,children:e.followers})," ",(0,m.jsx)("span",{className:B,children:"Followers"})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("span",{className:O,children:e.follow})," ",(0,m.jsx)("span",{className:B,children:"Follow"})]})]})},U="UserName_wrapper__ql1Mm",J="UserName_fullName__J2R3Z",D="UserName_nickname__UlO87",L=function(e){var s=e.fullName,o=e.nickname;return(0,m.jsxs)("div",{className:U,children:[(0,m.jsx)("div",{className:J,children:(0,m.jsx)("h2",{children:s})}),(0,m.jsx)("div",{className:D,children:o})]})},E="ButtonsBarProfile_wrapper__4T7qe",z=function(e){return(0,m.jsx)("div",{className:E,children:(0,m.jsx)(C.z,{disabled:e.disabled,name:e.name,color:e.color,callBack:e.callBack,size:"large"})})},K=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=(0,l.useState)(!1),i=(0,u.Z)(n,2),a=i[0],c=i[1];if(e.profile){var p=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return r(!0),e.next=4,setTimeout((function(){c(!a),r(!1)}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"headerProfile",children:(0,m.jsxs)("div",{className:I,children:[(0,m.jsx)("img",{className:M,src:e.randomBackground}),(0,m.jsx)("img",{className:T,src:e.profile.photos.large?e.profile.photos.large:"".concat("/Samuray-way","/img/user5.png"),width:"200px"}),(0,m.jsx)(A,{posts:e.postsLeng,followers:"2.1k",follow:"32k"}),(0,m.jsx)(L,{fullName:e.profile.fullName,nickname:"@"+e.profile.fullName}),e.isOwner?(0,m.jsx)(z,{callBack:function(){return e.setEditMode(!e.editMode)},color:e.editMode?"red":"green",name:e.editMode?"cancel":"edit"}):(0,m.jsx)("div",{children:(0,m.jsx)(z,{disabled:t,color:a?"red":"green",callBack:p,name:a?"Unfollow":"Follow"})})]})})}return(0,m.jsx)(g.p9,{})},q=function(e){var s=(0,l.useState)(!1),o=(0,u.Z)(s,2),t=o[0],r=o[1],n=e.backgrounds[5];if(e.profile){var i=function(){var s=(0,d.Z)(f().mark((function s(o){var t;return f().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t={userId:e.myId.toString(),fullName:o.fullName,aboutMe:o.aboutMe,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.lookingForAJobDescription,contacts:{github:o.github,mainLink:o.mainLink,website:o.website,facebook:o.facebook,instagram:o.instagram,twitter:o.twitter,youtube:o.youtube,vk:o.vk}},s.next=3,e.updateProfileInfoTC(t);case 3:0===s.sent.data.resultCode&&r(!1);case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(K,{profile:e.profile,setEditMode:r,editMode:t,randomBackground:n,isOwner:e.isOwner,postsLeng:e.postsLeng}),(0,m.jsx)("div",{className:h,children:e.isOwner?(0,m.jsx)(S,{profile:e.profile,initialValues:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,onSubmit:i,setEditMode:r,editMode:t,onMainPhotoSelected:function(s){var o;null!==(o=s.target.files)&&void 0!==o&&o.length&&e.savePhoto(s.target.files[0])}}):(0,m.jsx)(P,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner})})]})}return(0,m.jsx)(g.p9,{})},V=o(2457),H=o(364),G="MyPosts_postsBlock__I7u66",R="MyPosts_posts__84rU-",$="MyPosts_header__tcCad",Q="Post_item__Ury9y",X=function(e){return(0,m.jsxs)("div",{className:Q,children:[(0,m.jsx)("img",{src:e.photo?e.photo:"".concat("/Samuray-way","/img/user5.png")}),e.message,(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["like: ",e.like]})})]})},Y={},W="InputForPost_formControl__Eb9b4",ee="InputForPost_formControlError__Oi5M6",se="InputForPost_spanFormControlError__fgz+l",oe="InputForPost_form__Jg12G",te=["input","meta"],re=function(e){var s=e.input,o=e.meta,r=(0,j.Z)(e,te),n=o.touched&&o.error;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:oe,children:[(0,m.jsx)("input",(0,t.Z)((0,t.Z)((0,t.Z)({className:W+" "+(n?ee:"")},r),s),o)),(0,m.jsx)(C.z,{name:"Add post",size:"large",callBack:function(){},color:"blue"})]}),(0,m.jsx)("div",{children:n&&(0,m.jsx)("div",{className:se,children:o.error})})]})},ne=(0,y.Z)({form:"MyPostsAddMessageForm"})((function(e){return(0,m.jsx)("form",{onSubmit:e.handleSubmit,children:(0,m.jsx)("div",{className:Y.form,children:(0,m.jsx)(v.Z,{component:re,name:"newPostBody",placeholder:"Enter your post",validate:[b.TD]})})})})),ie=l.memo((function(e){var s=e.posts.map((function(s){var o;return(0,m.jsx)(X,{message:s.message,like:s.like,photo:null===(o=e.photo)||void 0===o?void 0:o.small},s.id)}));return(0,m.jsxs)("div",{className:G,children:[(0,m.jsxs)("div",{className:$,children:[(0,m.jsx)("h3",{children:"My post"}),(0,m.jsx)("div",{children:(0,m.jsx)(ne,{onSubmit:function(s){s.newPostBody.trim()&&(e.addPost(s.newPostBody),s.newPostBody="")}})})]}),(0,m.jsx)("div",{className:R,children:(0,m.jsx)("div",{children:s})})]})})),ae=(0,H.$j)((function(e){var s;return{posts:e.profilePage.posts,photo:null===(s=e.profilePage.profile)||void 0===s?void 0:s.photos}}),{addPost:V.q2})(ie),le=function(e){return(0,m.jsxs)("div",{className:c.content,children:[e.profile?(0,m.jsx)(q,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,savePhoto:e.savePhoto,myId:e.myId,updateProfileInfoTC:e.updateProfileInfoTC,backgrounds:e.backgrounds,postsLeng:e.postsLeng}):(0,m.jsx)(g.p9,{}),(0,m.jsx)(ae,{})]})},ce=o(9271),de=o(7781),ue=o(1297),pe=function(e){(0,i.Z)(o,e);var s=(0,a.Z)(o);function o(){return(0,r.Z)(this,o),s.apply(this,arguments)}return(0,n.Z)(o,[{key:"onUpdateComponent",value:function(){var e=this.props.match.params.userId;e||(e=this.props.myId.toString()),this.props.setUserProfileTC(e),this.props.setUserStatusTC(e)}},{key:"componentDidMount",value:function(){this.onUpdateComponent()}},{key:"componentDidUpdate",value:function(e,s){console.log("updateProps",e,s),e.match.params.userId!==this.props.match.params.userId&&this.onUpdateComponent()}},{key:"render",value:function(){return(0,m.jsx)(le,(0,t.Z)((0,t.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatusTC:this.props.updateStatusTC,isOwner:this.props.myId==this.props.id,savePhoto:this.props.savePhoto,myId:this.props.myId,updateProfileInfoTC:this.props.updateProfileInfoTC,backgrounds:this.props.backgrounds,postsLeng:this.props.postsLeng}))}}]),o}(l.Component),fe=(0,de.qC)((0,H.$j)((function(e){var s;return{profile:e.profilePage.profile,status:e.profilePage.status,id:null===(s=e.profilePage.profile)||void 0===s?void 0:s.userId,myId:e.authMe.id,backgrounds:e.profilePage.backgrounds,postsLeng:e.profilePage.posts.length}}),{setUserStatusTC:V.hd,setUserProfileTC:V.bq,updateStatusTC:V.OG,savePhoto:V.Ju,updateProfileInfoTC:V.TR}),ce.EN,ue.e)(pe)}}]);
//# sourceMappingURL=143.76262d7d.chunk.js.map